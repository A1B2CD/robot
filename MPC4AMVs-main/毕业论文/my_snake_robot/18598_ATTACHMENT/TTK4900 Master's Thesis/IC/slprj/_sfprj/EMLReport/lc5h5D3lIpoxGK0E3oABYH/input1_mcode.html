<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type0" id="S2T0U3">u</span>,<span class="var type1" id="S3T1U4">d_est</span>]= input(<span class="var type1" id="S4T2U7">x</span>,<span class="var type1" id="S5T3U8">estimate</span>,<span class="var type1" id="S6T1U9">known_input</span>,<span class="var type1" id="S7T4U10">regressor</span>,<span class="var type1" id="S8T1U11">s_m</span>, <span class="var type1" id="S9T5U12">K_D</span>,<span class="var type2" id="S10T6V1U13">snake</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T3:U9"><span class="var type1" id="S11T3U16">quat</span>      =  <span class="mxinfo " id="T3:U11"><span class="var type1" id="S4T2U18">x</span>(<span class="mxinfo " id="T17:U13">4:7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T18:U14"><span class="var type1" id="S12T18U24">theta</span>     =  <span class="mxinfo " id="T18:U16"><span class="var type1" id="S4T2U26">x</span>(<span class="mxinfo " id="T19:U18">8 : 6+<span class="var type1" id="S10T6U32">snake</span>.n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">[<span class="mxinfo " id="T20:U20">~</span>, <span class="var type1" id="S13T21U38">J</span>]    =  <span class="fcn" id="F2N11:B40">comp_rot_jac</span>(<span class="var type1" id="S11T3U41">quat</span>,<span class="var type1" id="S12T18U42">theta</span>,<span class="var type1" id="S10T6U43">snake</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T22:U25"><span class="var type1" id="S15T22U46">B</span>=<span class="mxinfo " id="T22:U27"><span class="fcn" id="F36N10:B48">comp_TCM</span>(<span class="var type1" id="S13T21U49">J</span>,<span class="var type1" id="S10T6U50">snake</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="var type0" id="S17T0U53">B_u</span>=[<span class="mxinfo " id="T23:U30"><span class="mxinfo " id="T12:U31">eye(6,6)</span> <span class="mxinfo " id="T24:U32">zeros(<span class="mxinfo " id="T9:U33">6</span>,<span class="mxinfo " id="T9:U34">8</span>)</span></span>; <span class="mxinfo " id="T25:U35"><span class="message error" id="M1F1C"><span class="mxinfo " id="T26:U36"><span class="mxinfo " id="T27:U37"><span class="var type1" id="S15T22U67">B</span>(<span class="mxinfo " id="T28:U39">7:end</span>,<span class="mxinfo " id="T29:U40">:</span>)</span>*<span class="mxinfo " id="T30:U41">pinv(<span class="mxinfo " id="T31:U42"><span class="var type1" id="S15T22U76">B</span>(<span class="mxinfo " id="T32:U44">1:6</span>,<span class="mxinfo " id="T29:U45">:</span>)</span>)</span></span> <span class="mxinfo " id="T33:U46">eye(8)</span></span></span>];</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T1:U47"><span class="var type1" id="S3T1U86">d_est</span>=<span class="mxinfo " id="T1:U49"><span class="var type1" id="S7T4U88">regressor</span>*<span class="var type1" id="S5T3U89">estimate</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="var type0" id="S2T0U92">u</span>=pinv(<span class="var type0" id="S17T0U96"><span class="message error" id="M2F1C">B_u</span></span>)*(<span class="var type0" id="S9T0U101">K_D</span>*<span class="var type0" id="S8T0U102">s_m</span>+<span class="var type0" id="S6T0U103">known_input</span>+<span class="var type0" id="S7T0U105">regressor</span>*<span class="var type0" id="S5T0U106">estimate</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
