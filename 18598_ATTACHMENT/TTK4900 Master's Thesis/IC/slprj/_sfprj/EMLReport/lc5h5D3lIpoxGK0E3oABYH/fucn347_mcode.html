<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="153,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">zeta_ref</span> , <span class="var type1" id="S3T41U4">pos_t_ref</span>,<span class="var type1" id="S4T81U5">eta_t_dot_quat_ref</span>, <span class="var type1" id="S5T3U6">quatt_ref</span>, <span class="var type1" id="S6T16U7">eta_ee_ref_dot</span>] = fucn(<span class="var type1" id="S7T16U10">eta_ee_d_dot</span>,<span class="var type1" id="S8T2U11">x</span>,<span class="var type1" id="S9T81U12">eta_t_ref</span>, <span class="var type2" id="S10T6V1U13">snake</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="153,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T3:U10"><span class="var type1" id="S11T3U16">quat</span>      =  <span class="mxinfo " id="T3:U12"><span class="var type1" id="S8T2U18">x</span>(<span class="mxinfo " id="T17:U14">4:7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T18:U15"><span class="var type1" id="S12T18U24">theta</span>     =  <span class="mxinfo " id="T18:U17"><span class="var type1" id="S8T2U26">x</span>(<span class="mxinfo " id="T19:U19">8 : 6+<span class="var type1" id="S10T6U32">snake</span>.n</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,4" id="srcline4"> 4</a></span><span class="line">[<span class="var type1" id="S13T20U37">R</span>, <span class="var type1" id="S14T21U38">J_t</span>]    =  <span class="fcn" id="F2N11:B40">comp_rot_jac</span>(<span class="var type1" id="S11T3U41">quat</span>,<span class="var type1" id="S12T18U42">theta</span>,<span class="var type1" id="S10T6U43">snake</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="153,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T41:U26"><span class="var type1" id="S16T41U46">eul_ee</span>=<span class="mxinfo " id="T41:U28"><span class="mxinfo " id="T42:U29">rotm2eul(<span class="mxinfo " id="T34:U30"><span class="var type1" id="S13T20U51">R</span>(<span class="mxinfo " id="T35:U32">:</span>,<span class="mxinfo " id="T35:U33">:</span>,<span class="mxinfo " id="T47:U34">11</span>)</span>, <span class="string">'XYZ'</span>)</span>'</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T34:U35"><span class="var type1" id="S18T34U58">Jinv</span>=<span class="mxinfo " id="T34:U37"><span class="fcn" id="F470N3:B60">Jinv_fromeul</span>(<span class="var type1" id="S16T41U61">eul_ee</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T45:U39"><span class="var type1" id="S20T45U64">J</span>=<span class="mxinfo " id="T45:U41"><span class="mxinfo " id="T12:U42">[<span class="mxinfo " id="T56:U43"><span class="mxinfo " id="T34:U44"><span class="var type1" id="S13T20U69">R</span>(<span class="mxinfo " id="T35:U46">:</span>,<span class="mxinfo " id="T35:U47">:</span>,<span class="mxinfo " id="T47:U48">11</span>)</span> <span class="mxinfo " id="T34:U49">zeros(<span class="mxinfo " id="T9:U50">3</span>)</span></span>; <span class="mxinfo " id="T56:U51"><span class="mxinfo " id="T34:U52">zeros(<span class="mxinfo " id="T9:U53">3</span>)</span> <span class="var type1" id="S18T34U80">Jinv</span></span>]</span>*<span class="mxinfo " id="T45:U55"><span class="var type1" id="S14T21U82">J_t</span>(<span class="mxinfo " id="T32:U57">:</span>,<span class="mxinfo " id="T46:U58">:</span>,<span class="mxinfo " id="T47:U59">11</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T1:U60"><span class="var type1" id="S2T1U88">zeta_ref</span>=<span class="mxinfo " id="T1:U62"><span class="mxinfo " id="T59:U63"><span class="mxinfo " id="T59:U64"><span class="mxinfo " id="T5:U65">inv(<span class="mxinfo " id="T5:U66">diag([1 1 1 1 1 1 1 1 1 1 1 1 1 1 0.1])</span>)</span>*<span class="mxinfo " id="T59:U67"><span class="var type1" id="S20T45U114">J</span>'</span></span>/(<span class="mxinfo " id="T12:U69"><span class="mxinfo " id="T12:U70"><span class="mxinfo " id="T45:U71"><span class="var type1" id="S20T45U119">J</span>*<span class="mxinfo " id="T5:U73">inv(<span class="mxinfo " id="T5:U74">diag([1 1 1 1 1 1 1 1 1 1 1 1 1 1 0.1])</span>)</span></span>*<span class="mxinfo " id="T59:U75"><span class="var type1" id="S20T45U142">J</span>'</span></span>+<span class="mxinfo " id="T12:U77"><span class="mxinfo " id="T9:U78">0.0001</span>*<span class="mxinfo " id="T12:U79">eye(6)</span></span></span>)</span>*(<span class="var type1" id="S7T16U149">eta_ee_d_dot</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T16:U81"><span class="var type1" id="S6T16U152">eta_ee_ref_dot</span>=<span class="mxinfo " id="T16:U83"><span class="var type1" id="S20T45U154">J</span>*<span class="var type1" id="S2T1U155">zeta_ref</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,14" id="srcline14">14</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,15" id="srcline15">15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,16" id="srcline16">16</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T3:U86"><span class="var type1" id="S5T3U158">quatt_ref</span>=<span class="mxinfo " id="T3:U88"><span class="var type1" id="S9T81U160">eta_t_ref</span>(<span class="mxinfo " id="T17:U90">4:7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T41:U91"><span class="var type1" id="S3T41U166">pos_t_ref</span>=<span class="mxinfo " id="T41:U93"><span class="var type1" id="S9T81U168">eta_t_ref</span>(<span class="mxinfo " id="T42:U95"><span class="mxinfo " id="T9:U96">1</span>:<span class="mxinfo " id="T9:U97">3</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T34:U98"><span class="var type1" id="S25T34U174">R_tail</span>=<span class="mxinfo " id="T34:U100">quat2rotm(<span class="mxinfo " id="T44:U101"><span class="var type1" id="S5T3U178">quatt_ref</span>'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T41:U103"><span class="var type1" id="S27T41U181">pos_t_dot</span>   =  <span class="mxinfo " id="T41:U105"><span class="mxinfo " id="T34:U106"><span class="var type1" id="S25T34U184">R_tail</span>(:,:,<span class="mxinfo " id="T9:U108">1</span>)</span>*<span class="mxinfo " id="T41:U109"><span class="var type1" id="S2T1U189">zeta_ref</span>(<span class="mxinfo " id="T48:U111">1:3</span>)</span></span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="153,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T3:U112"><span class="var type1" id="S28T3U195">quat_t_dot</span>  =  <span class="mxinfo " id="T3:U114"><span class="mxinfo " id="T3:U115"><span class="mxinfo " id="T82:U116"><span class="fcn" id="F721N8:B199">TransAngQ</span>(<span class="var type1" id="S5T3U200">quatt_ref</span>)</span>*<span class="mxinfo " id="T41:U118"><span class="var type1" id="S2T1U202">zeta_ref</span>(<span class="mxinfo " id="T48:U120">4:6</span>)</span></span>+<span class="mxinfo " id="T3:U121"><span class="mxinfo " id="T9:U122"><span class="mxinfo " id="T9:U123">1</span>*(<span class="mxinfo " id="T9:U124"><span class="mxinfo " id="T9:U125">1</span>-<span class="mxinfo " id="T9:U126"><span class="mxinfo " id="T44:U127"><span class="var type1" id="S5T3U214">quatt_ref</span>'</span>*<span class="var type1" id="S5T3U215">quatt_ref</span></span></span>)</span>*<span class="var type1" id="S5T3U216">quatt_ref</span></span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="153,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="153,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T81:U131"><span class="var type1" id="S4T81U219">eta_t_dot_quat_ref</span>=<span class="mxinfo " id="T81:U133">[<span class="var type1" id="S27T41U222">pos_t_dot</span>; <span class="var type1" id="S28T3U224">quat_t_dot</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="153,25" id="srcline25">25</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
