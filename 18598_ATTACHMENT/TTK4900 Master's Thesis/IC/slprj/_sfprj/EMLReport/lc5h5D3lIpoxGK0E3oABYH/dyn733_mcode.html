<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="212,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">y_tilde</span>,<span class="var type1" id="S3T41U4">eps_tilde_dot</span>] = dyn(<span class="var type1" id="S4T2U7">x</span>,<span class="var type1" id="S5T41U8">pos_t_ref</span>, <span class="var type1" id="S6T3U9">quat_t_ref</span>, <span class="var type1" id="S7T18U10">theta_ref</span>, <span class="var type1" id="S8T1U11">zeta_ref</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="212,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T41:U8"><span class="var type1" id="S9T41U14">pos_t</span>=<span class="mxinfo " id="T41:U10"><span class="var type1" id="S4T2U16">x</span>(<span class="mxinfo " id="T42:U12"><span class="mxinfo " id="T9:U13">1</span>:<span class="mxinfo " id="T9:U14">3</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T3:U15"><span class="var type1" id="S10T3U22">quat</span>      =  <span class="mxinfo " id="T3:U17"><span class="var type1" id="S4T2U24">x</span>(<span class="mxinfo " id="T17:U19">4:7</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T18:U20"><span class="var type1" id="S11T18U30">theta</span>     =  <span class="mxinfo " id="T18:U22"><span class="var type1" id="S4T2U32">x</span>(<span class="mxinfo " id="T8:U24"><span class="mxinfo " id="T9:U25">8</span> : <span class="mxinfo " id="T9:U26">16</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T1:U27"><span class="var type1" id="S12T1U38">zeta</span>     =  <span class="mxinfo " id="T1:U29"><span class="var type1" id="S4T2U40">x</span>( <span class="mxinfo " id="T134:U31"><span class="mxinfo " id="T9:U32">17</span>: <span class="mxinfo " id="T9:U33">31</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T18:U34"><span class="var type1" id="S13T18U46">theta_tilde</span>=<span class="mxinfo " id="T18:U36"><span class="var type1" id="S7T18U48">theta_ref</span>-<span class="var type1" id="S11T18U49">theta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T41:U39"><span class="var type1" id="S14T41U52">pos_tilde</span>=<span class="mxinfo " id="T41:U41"><span class="mxinfo " id="T34:U42">quat2rotm(<span class="mxinfo " id="T44:U43"><span class="var type1" id="S10T3U57">quat</span>'</span>)</span>*(<span class="mxinfo " id="T41:U45"><span class="var type1" id="S5T41U60">pos_t_ref</span>-<span class="var type1" id="S9T41U61">pos_t</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T41:U48"><span class="var type1" id="S16T41U64">pos_tilde2</span>=<span class="mxinfo " id="T41:U50"><span class="mxinfo " id="T34:U51"><span class="fcn" id="F3N4:B67">RotQ</span>(<span class="var type1" id="S10T3U68">quat</span>)</span>*(<span class="mxinfo " id="T41:U53"><span class="var type1" id="S5T41U71">pos_t_ref</span>-<span class="var type1" id="S9T41U72">pos_t</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,11" id="srcline11">11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T41:U56"><span class="var type1" id="S18T41U75">quat_tilde</span>=<span class="mxinfo " id="T41:U58"><span class="mxinfo " id="T41:U59"><span class="mxinfo " id="T41:U60"><span class="mxinfo " id="T9:U61"><span class="var type1" id="S10T3U80">quat</span>(<span class="mxinfo " id="T47:U63">1</span>)</span>*<span class="mxinfo " id="T41:U64"><span class="var type1" id="S6T3U83">quat_t_ref</span>(<span class="mxinfo " id="T48:U66">2:4</span>)</span></span>-<span class="mxinfo " id="T41:U67"><span class="mxinfo " id="T9:U68"><span class="var type1" id="S6T3U89">quat_t_ref</span>(<span class="mxinfo " id="T47:U70">1</span>)</span>*<span class="mxinfo " id="T41:U71"><span class="var type1" id="S10T3U92">quat</span>(<span class="mxinfo " id="T48:U73">2:4</span>)</span></span></span>+<span class="mxinfo " id="T41:U74">cross(<span class="mxinfo " id="T41:U75"><span class="var type1" id="S6T3U99">quat_t_ref</span>(<span class="mxinfo " id="T48:U77">2:4</span>)</span>,<span class="mxinfo " id="T41:U78"><span class="var type1" id="S10T3U104">quat</span>(<span class="mxinfo " id="T48:U80">2:4</span>)</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T9:U81"><span class="var type1" id="S20T9U110">eta_tilde</span> = <span class="mxinfo " id="T9:U83"><span class="mxinfo " id="T9:U84"><span class="mxinfo " id="T9:U85"><span class="var type1" id="S10T3U114">quat</span>(<span class="mxinfo " id="T47:U87">1</span>)</span> * <span class="mxinfo " id="T9:U88"><span class="var type1" id="S6T3U117">quat_t_ref</span> (<span class="mxinfo " id="T9:U90">1</span>)</span></span> + <span class="mxinfo " id="T9:U91"><span class="mxinfo " id="T42:U92"><span class="mxinfo " id="T41:U93"><span class="var type1" id="S6T3U122">quat_t_ref</span>(<span class="mxinfo " id="T48:U95">2:4</span>)</span>'</span>*<span class="mxinfo " id="T41:U96"><span class="var type1" id="S10T3U127">quat</span>(<span class="mxinfo " id="T48:U98">2:4</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,16" id="srcline16">16</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T37:U99"><span class="var type1" id="S20T9U134">eta_tilde</span> &lt; <span class="mxinfo " id="T9:U101">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="212,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T41:U102"><span class="var type1" id="S18T41U138">quat_tilde</span> = <span class="mxinfo " id="T41:U104">- <span class="var type1" id="S18T41U140">quat_tilde</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="212,18" id="srcline18">18</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="212,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T1:U106"><span class="var type1" id="S2T1U143">y_tilde</span>=<span class="mxinfo " id="T1:U108">[<span class="var type1" id="S14T41U146">pos_tilde</span>;<span class="var type1" id="S18T41U148">quat_tilde</span>; <span class="var type1" id="S13T18U150">theta_tilde</span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,22" id="srcline22">22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo " id="T41:U112"><span class="var type1" id="S21T41U153">out</span>=<span class="mxinfo " id="T41:U114"><span class="var type1" id="S5T41U155">pos_t_ref</span>-<span class="var type1" id="S9T41U156">pos_t</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo " id="T41:U117"><span class="var type1" id="S22T41U159">nu2_tilde</span>=<span class="mxinfo " id="T41:U119"><span class="mxinfo " id="T41:U120"><span class="var type1" id="S8T1U162">zeta_ref</span>(<span class="mxinfo " id="T48:U122">4:6</span>)</span>-<span class="mxinfo " id="T41:U123"><span class="var type1" id="S12T1U167">zeta</span>(<span class="mxinfo " id="T42:U125"><span class="mxinfo " id="T9:U126">4</span>:<span class="mxinfo " id="T9:U127">6</span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,25" id="srcline25">25</a></span><span class="line"><span class="mxinfo " id="T41:U128"><span class="var type1" id="S3T41U173">eps_tilde_dot</span>=<span class="mxinfo " id="T41:U130"><span class="mxinfo " id="T41:U131"><span class="mxinfo " id="T9:U132"><span class="mxinfo " id="T9:U133">0.5</span>*<span class="var type1" id="S20T9U178">eta_tilde</span></span>*<span class="var type1" id="S22T41U179">nu2_tilde</span></span> + <span class="mxinfo " id="T41:U136"><span class="mxinfo " id="T34:U137"><span class="mxinfo " id="T9:U138">0.5</span>*<span class="mxinfo " id="T34:U139"><span class="fcn" id="F4N19:B184">skew</span>(<span class="var type1" id="S18T41U185">quat_tilde</span>)</span></span>*<span class="var type1" id="S22T41U186">nu2_tilde</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="212,26" id="srcline26">26</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="212,27" id="srcline27">27</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
